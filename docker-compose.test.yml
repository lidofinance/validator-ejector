version: '3.7'
services:
  app:
    build: .
    container_name: validator-ejector
    restart: unless-stopped
    environment:
      - EXECUTION_NODE=${EXECUTION_NODE}
      - CONSENSUS_NODE=${CONSENSUS_NODE}
      - LOCATOR_ADDRESS=${LOCATOR_ADDRESS}
      - STAKING_MODULE_ID=${STAKING_MODULE_ID}
      - OPERATOR_ID=${OPERATOR_ID}
      - MESSAGES_LOCATIONS=${MESSAGES_LOCATIONS}
      - S3_REGION=${S3_REGION}
      - S3_SECRET_ACCESS_KEY=${S3_SECRET_ACCESS_KEY}
      - S3_SECRET_ACCESS_KEY_FILE=${S3_SECRET_ACCESS_KEY_FILE}
      - S3_ACCESS_KEY_ID=${S3_ACCESS_KEY_ID}
      - GS_CREDENTIAL_FILE=${GS_CREDENTIAL_FILE}
      - GS_PROJECT_ID=${GS_PROJECT_ID}
      - MESSAGES_PASSWORD=${MESSAGES_PASSWORD}
      - MESSAGES_PASSWORD_FILE=${MESSAGES_PASSWORD_FILE}
      - ORACLE_ADDRESSES_ALLOWLIST=${ORACLE_ADDRESSES_ALLOWLIST}
      - BLOCKS_PRELOAD=${BLOCKS_PRELOAD}
      - BLOCKS_LOOP=${BLOCKS_LOOP}
      - JOB_INTERVAL=${JOB_INTERVAL}
      - HTTP_PORT=${HTTP_PORT}
      - RUN_METRICS=${RUN_METRICS}
      - RUN_HEALTH_CHECK=${RUN_HEALTH_CHECK}
      - LOGGER_LEVEL=${LOGGER_LEVEL}
      - LOGGER_FORMAT=${LOGGER_FORMAT}
      - LOGGER_PASSWORD=${LOGGER_PASSWORD}
      - LOGGER_SECRETS=${LOGGER_SECRETS}
      - LOGGER_SECRETS_FILE=${LOGGER_SECRETS_FILE}
      - DRY_RUN=${DRY_RUN}
    ports:
      - '${HTTP_PORT}:${HTTP_PORT}'
    volumes:
      - ./messages:/app/messages
